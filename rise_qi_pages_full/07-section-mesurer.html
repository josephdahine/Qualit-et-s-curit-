<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Section 7 – Mesurer</title>
  <style>
:root { --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
* { box-sizing: border-box; }
body { font-family: var(--font); margin: 0; padding: 24px; line-height: 1.6; color:#111827; background:#f8fafc; }
.wrap { max-width: 980px; margin: 0 auto; }
.card { background: #fff; border: 1px solid #e5e7eb; border-radius: 16px; padding: 22px; box-shadow: 0 4px 16px rgba(0,0,0,.06); margin-bottom: 16px; }
h1, h2, h3 { line-height: 1.2; margin: 6px 0 10px; }
h1 { font-size: 28px; }
h2 { font-size: 22px; }
h3 { font-size: 18px; }
.lead { color:#374151; }
.kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background:#f3f4f6; padding:2px 6px; border-radius:6px; }
.badge { display:inline-block; padding:4px 10px; border-radius:9999px; background:#eef2ff; color:#3730a3; font-weight:700; font-size:12px; margin-right:6px;}
.table { width:100%; border-collapse: collapse; }
.table th, .table td { border-bottom:1px solid #e5e7eb; padding:8px; text-align:left; vertical-align: top; }
.note { background:#f9fafb; border:1px solid #e5e7eb; border-radius:12px; padding:12px; }
.btn { display:inline-block; padding: 10px 14px; border-radius: 12px; border: 1px solid #e5e7eb; cursor: pointer; margin: 6px 6px 6px 0; background: #f9fafb; font-weight: 600; }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.primary { background: #111827; color: white; border-color: #111827; }
.muted { color: #6b7280; }
.ok { color: #065f46; font-weight: 600; }
.warn { color: #92400e; font-weight: 600; }
svg { background:#ffffff; width:100%; border:1px solid #e5e7eb; border-radius:12px; }
details { background:#f9fafb; border:1px solid #e5e7eb; padding:12px; border-radius:12px; }
summary { cursor:pointer; font-weight:700; }
hr { border:0; border-top:1px solid #e5e7eb; margin: 20px 0; }
ul { margin: 8px 0 8px 18px; }
</style>
</head>
<body>
  <div class="wrap">
    
<div class="card">
  <span class="badge">Section 7 – 10 min</span>
  <h1>Mesurer les effets : Run chart & SPC chart</h1>
  <p>Mesurez votre indicateur dans le temps. Le run chart aide à repérer des tendances et des changements non aléatoires.</p>
  <ul>
    <li>Signaux run chart (IHI) : 6 points du même côté de la médiane, tendance soutenue, rupture brutale.</li>
    <li>SPC chart (plus de points) : moyenne, limites de contrôle ±3σ, règles statistiques.</li>
  </ul>
  <div class="note"><strong>À noter :</strong> quand la campagne progresse, le nombre hebdomadaire de vaccins peut diminuer — signe d’une cible atteinte, pas d’un échec.</div>
</div>

<div class="card" id="exo7">
  <h2>Exercice — Interprétez un run chart</h2>
  <table class="table" id="tbl">
    <thead><tr><th>Semaine</th><th>Vaccins</th></tr></thead>
    <tbody>
      <tr><td>1</td><td>4</td></tr>
      <tr><td>2</td><td>5</td></tr>
      <tr><td>3</td><td>4</td></tr>
      <tr><td>4</td><td>6</td></tr>
      <tr><td>5</td><td>12</td></tr>
      <tr><td>6</td><td>15</td></tr>
      <tr><td>7</td><td>18</td></tr>
      <tr><td>8</td><td>14</td></tr>
    </tbody>
  </table>
  <div style="margin:10px 0;"><button class="btn primary" id="draw">Tracer</button></div>
  <svg id="chart" viewBox="0 0 900 380" preserveAspectRatio="xMidYMid meet"></svg>
  <div style="margin-top:10px">
    <label><input type="radio" name="q" value="oui"> Oui, probablement efficace</label>
    <label style="margin-left:12px"><input type="radio" name="q" value="non"> Non, pas évident</label>
    <button class="btn primary" id="check">Vérifier</button> <span id="fb"></span>
  </div>
</div>

  </div>

<script>
const svg=document.getElementById('chart');const pad={left:50,top:20,right:20,bottom:40};
function getData(){return[...document.querySelectorAll('#tbl tbody tr')].map(tr=>({week:+tr.children[0].textContent.trim(),val:+tr.children[1].textContent.trim()}));}
function median(arr){const a=[...arr].sort((x,y)=>x-y);const n=a.length;return n%2?a[(n-1)/2]:(a[n/2-1]+a[n/2])/2;}
function draw(){const data=getData();const pre=data.slice(0,4).map(d=>d.val);const med=median(pre);const W=900-pad.left-pad.right,H=380-pad.top-pad.bottom;svg.innerHTML='';const g=document.createElementNS('http://www.w3.org/2000/svg','g');g.setAttribute('transform','translate('+pad.left+','+pad.top+')');svg.appendChild(g);const maxY=Math.max(...data.map(d=>d.val))*1.2;const xStep=W/(data.length-1);g.innerHTML+='<line x1="0" y1="'+H+'" x2="'+W+'" y2="'+H+'" stroke="#9ca3af"/>'+'<line x1="0" y1="0" x2="0" y2="'+H+'" stroke="#9ca3af"/>';const pts=data.map((d,i)=>[i*xStep,H-d.val/maxY*H]);const path=document.createElementNS('http://www.w3.org/2000/svg','path');path.setAttribute('d',pts.map((p,i)=>(i?'L':'M')+p[0]+' '+p[1]).join(' '));path.setAttribute('fill','none');path.setAttribute('stroke','#111827');path.setAttribute('stroke-width','2');g.appendChild(path);pts.forEach((p,i)=>{const c=document.createElementNS('http://www.w3.org/2000/svg','circle');c.setAttribute('cx',p[0]);c.setAttribute('cy',p[1]);c.setAttribute('r',4);c.setAttribute('fill','#111827');g.appendChild(c);const t=document.createElementNS('http://www.w3.org/2000/svg','text');t.setAttribute('x',p[0]);t.setAttribute('y',H+16);t.setAttribute('text-anchor','middle');t.setAttribute('font-size','12');t.textContent=data[i].week;g.appendChild(t);});const yMed=H-med/maxY*H;const mline=document.createElementNS('http://www.w3.org/2000/svg','line');mline.setAttribute('x1',0);mline.setAttribute('x2',W);mline.setAttribute('y1',yMed);mline.setAttribute('y2',yMed);mline.setAttribute('stroke','#ef4444');mline.setAttribute('stroke-dasharray','6 6');g.appendChild(mline);const lbl=document.createElementNS('http://www.w3.org/2000/svg','text');lbl.setAttribute('x',W-4);lbl.setAttribute('y',yMed-6);lbl.setAttribute('text-anchor','end');lbl.setAttribute('font-size','12');lbl.textContent='Médiane (S1–S4)';g.appendChild(lbl);const x5=4*xStep;const vline=document.createElementNS('http://www.w3.org/2000/svg','line');vline.setAttribute('x1',x5);vline.setAttribute('x2',x5);vline.setAttribute('y1',0);vline.setAttribute('y2',H);vline.setAttribute('stroke','#60a5fa');vline.setAttribute('stroke-dasharray','4 4');g.appendChild(vline);const l2=document.createElementNS('http://www.w3.org/2000/svg','text');l2.setAttribute('x',x5+6);l2.setAttribute('y',14);l2.setAttribute('font-size','12');l2.textContent='Intervention (S5)';g.appendChild(l2);}
document.getElementById('draw').addEventListener('click',draw);
document.getElementById('check').addEventListener('click',()=>{const v=(document.querySelector('input[name=q]:checked')||{}).value;const fb=document.getElementById('fb');if(!v){fb.innerHTML='<span class="warn">Choisissez une réponse.</span>';return;}fb.innerHTML=(v==='oui')?'<span class="ok">Correct : plusieurs points au-dessus de la médiane après S5.</span>':'<span class="warn">Observez la tendance après S5 : elle s’élève.</span>';});
</script>

</body>
</html>