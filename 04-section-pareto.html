<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Section 4 – Pareto</title>
  <style>
:root { --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
* { box-sizing: border-box; }
body { font-family: var(--font); margin: 0; padding: 24px; line-height: 1.6; color:#111827; background:#f8fafc; }
.wrap { max-width: 980px; margin: 0 auto; }
.card { background: #fff; border: 1px solid #e5e7eb; border-radius: 16px; padding: 22px; box-shadow: 0 4px 16px rgba(0,0,0,.06); margin-bottom: 16px; }
h1, h2, h3 { line-height: 1.2; margin: 6px 0 10px; }
h1 { font-size: 28px; }
h2 { font-size: 22px; }
h3 { font-size: 18px; }
.lead { color:#374151; }
.kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background:#f3f4f6; padding:2px 6px; border-radius:6px; }
.badge { display:inline-block; padding:4px 10px; border-radius:9999px; background:#eef2ff; color:#3730a3; font-weight:700; font-size:12px; margin-right:6px;}
.table { width:100%; border-collapse: collapse; }
.table th, .table td { border-bottom:1px solid #e5e7eb; padding:8px; text-align:left; vertical-align: top; }
.note { background:#f9fafb; border:1px solid #e5e7eb; border-radius:12px; padding:12px; }
.btn { display:inline-block; padding: 10px 14px; border-radius: 12px; border: 1px solid #e5e7eb; cursor: pointer; margin: 6px 6px 6px 0; background: #f9fafb; font-weight: 600; }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.primary { background: #111827; color: white; border-color: #111827; }
.muted { color: #6b7280; }
.ok { color: #065f46; font-weight: 600; }
.warn { color: #92400e; font-weight: 600; }
svg { background:#ffffff; width:100%; border:1px solid #e5e7eb; border-radius:12px; }
details { background:#f9fafb; border:1px solid #e5e7eb; padding:12px; border-radius:12px; }
summary { cursor:pointer; font-weight:700; }
hr { border:0; border-top:1px solid #e5e7eb; margin: 20px 0; }
ul { margin: 8px 0 8px 18px; }
</style>
</head>
<body>
  <div class="wrap">
    
<div class="card">
  <span class="badge">Section 4 – 10 min</span>
  <h1>Outils de priorisation : Diagramme de Pareto</h1>
  <p>Pour un impact maximal avec peu de ressources, identifiez les <em>causes principales</em> qui contribuent le plus au problème.</p>
  <p><strong>Principe 80/20 :</strong> souvent, 80 % des effets proviennent de 20 % des causes.</p>
  <div class="note">
    <p><strong>Exemple — Sondage personnel non vacciné :</strong></p>
    <table class="table">
      <thead><tr><th>Raison évoquée</th><th>Nombre</th></tr></thead>
      <tbody>
        <tr><td>Manque de temps</td><td>45</td></tr>
        <tr><td>Peur des effets secondaires</td><td>30</td></tr>
        <tr><td>Doute sur l’efficacité</td><td>15</td></tr>
        <tr><td>Aucune offre en quart de nuit</td><td>7</td></tr>
        <tr><td>Convictions personnelles</td><td>3</td></tr>
      </tbody>
    </table>
  </div>
</div>

<div class="card" id="exo4">
  <h2>Exercice — Générez et lisez un Pareto</h2>
  <p>Cliquez sur <strong>Générer</strong> puis sélectionnez les deux causes à cibler.</p>
  <div><button class="btn primary" id="draw">Générer le Pareto</button><button class="btn" id="reset">Réinitialiser</button></div>
  <svg id="chart" viewBox="0 0 900 360" preserveAspectRatio="xMidYMid meet" style="margin-top:8px"></svg>
  <div class="note" style="margin-top:10px">
    <label><input type="checkbox" value="Manque de temps"> Manque de temps</label>
    <label style="margin-left:12px"><input type="checkbox" value="Peur des effets secondaires"> Peur des effets secondaires</label>
    <label style="margin-left:12px"><input type="checkbox" value="Doute sur l’efficacité"> Doute sur l’efficacité</label>
    <label style="margin-left:12px"><input type="checkbox" value="Aucune offre en quart de nuit"> Aucune offre en quart de nuit</label>
    <label style="margin-left:12px"><input type="checkbox" value="Convictions personnelles"> Convictions personnelles</label>
    <div style="margin-top:8px"><button class="btn primary" id="check">Vérifier</button> <span id="fb"></span></div>
  </div>
</div>

  </div>

<script>
const svg4=document.getElementById('chart');const pad4={left:60,top:20,right:40,bottom:40};
function data4(){return[{label:'Manque de temps',value:45},{label:'Peur des effets secondaires',value:30},{label:'Doute sur l’efficacité',value:15},{label:'Aucune offre en quart de nuit',value:7},{label:'Convictions personnelles',value:3}];}
function drawPareto(){const data=data4().sort((a,b)=>b.value-a.value);const total=data.reduce((s,d)=>s+d.value,0);const W=900-pad4.left-pad4.right,H=360-pad4.top-pad4.bottom;svg4.innerHTML='';const g=document.createElementNS('http://www.w3.org/2000/svg','g');g.setAttribute('transform','translate('+pad4.left+','+pad4.top+')');svg4.appendChild(g);const maxV=Math.max(...data.map(d=>d.value));const xStep=W/data.length;g.innerHTML+='<line x1="0" y1="'+H+'" x2="'+W+'" y2="'+H+'" stroke="#9ca3af"/>'+'<line x1="0" y1="0" x2="0" y2="'+H+'" stroke="#9ca3af"/>';data.forEach((d,i)=>{const x=i*xStep+xStep*.15,bw=xStep*.7,h=(d.value/maxV)*(H*.9),y=H-h;const rect=document.createElementNS('http://www.w3.org/2000/svg','rect');rect.setAttribute('x',x);rect.setAttribute('y',y);rect.setAttribute('width',bw);rect.setAttribute('height',h);rect.setAttribute('fill','#93c5fd');g.appendChild(rect);const lbl=document.createElementNS('http://www.w3.org/2000/svg','text');lbl.setAttribute('x',x+bw/2);lbl.setAttribute('y',H+16);lbl.setAttribute('text-anchor','middle');lbl.setAttribute('font-size','12');lbl.textContent=d.label;g.appendChild(lbl);});let cum=0;const pts=[];data.forEach((d,i)=>{cum+=d.value;const cx=i*xStep+xStep/2,cy=H-(cum/total)*(H*.9);pts.push([cx,cy]);});const path=document.createElementNS('http://www.w3.org/2000/svg','path');path.setAttribute('d',pts.map((p,i)=>(i?'L':'M')+p[0]+' '+p[1]).join(' '));path.setAttribute('fill','none');path.setAttribute('stroke','#ef4444');path.setAttribute('stroke-width','2');g.appendChild(path);pts.forEach(p=>{const c=document.createElementNS('http://www.w3.org/2000/svg','circle');c.setAttribute('cx',p[0]);c.setAttribute('cy',p[1]);c.setAttribute('r',4);c.setAttribute('fill','#ef4444');g.appendChild(c);});}
document.getElementById('draw').addEventListener('click',drawPareto);
document.getElementById('reset').addEventListener('click',()=>{svg4.innerHTML='';document.querySelectorAll('#exo4 input[type=checkbox]').forEach(c=>c.checked=false);document.getElementById('fb').textContent='';});
document.getElementById('check').addEventListener('click',()=>{const checked=[...document.querySelectorAll('#exo4 input[type=checkbox]:checked')].map(c=>c.value);const correct=['Manque de temps','Peur des effets secondaires'];const ok=correct.every(c=>checked.includes(c))&&checked.length===2;document.getElementById('fb').innerHTML=ok?'<span class="ok">Exact ✅ (~75%).</span>':'<span class="warn">Ce ne sont pas les deux causes principales.</span>';});
</script>

</body>
</html>